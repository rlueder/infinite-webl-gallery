<!DOCTYPE html>
<html lang="en" class="no-js loading">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Infinite WebGL Gallery | Combined Demo | Codrops</title>
    <meta name="description" content="Combined X/Y gesture infinite gallery with random colored elements." />
    <meta name="keywords" content="javascript, webgl, shaders, glsl, inspiration, web design" />
    <meta name="author" content="Codrops" />
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="https://use.typekit.net/zvj1jsw.css">
  </head>

  <body data-id="2">
    <main>
      <div class="frame">
        <div class="frame__title-wrap">
          <h1 class="frame__title">Infinite WebGL Scrolling Gallery</h1>
          <p class="frame__tagline">Combined X/Y gestures with random colors</p>
        </div>

        <div class="frame__links">
          <a href="https://tympanus.net/Tutorials/BreathingDots/">Previous Demo</a>
          <a href="https://tympanus.net/codrops/?p=52634">Article</a>
          <a href="https://github.com/lhbizarro/infinite-webl-gallery" target="_blank">GitHub</a>
        </div>

        <div class="frame__demos">
          <a href="index.html" class="frame__demo">Demo 1</a>
          <a href="index2.html" class="frame__demo">Demo 2</a>
          <a href="index-combined.html" class="frame__demo frame__demo--current">Combined</a>
        </div>
      </div>

      <div class="demo-combined">
        <div class="demo-combined__gallery">
          <!-- Generate 100 elements with different positions -->
        </div>
      </div>
    </main>

    <script>
      // Generate 500 random elements filling the viewport
      const gallery = document.querySelector('.demo-combined__gallery');
      
      // Calculate grid dimensions to fill viewport
      const viewportWidth = window.innerWidth;
      const viewportHeight = window.innerHeight;
      
      // Calculate how many elements fit in each direction with 5px gaps
      const elementWidth = 128;
      const elementHeight = 192;
      const gap = 5;
      
      const cols = Math.ceil(viewportWidth / (elementWidth + gap));
      const rows = Math.ceil(500 / cols); // Ensure we have at least 500 items
      
      // Update gallery container size to ensure full viewport coverage
      gallery.style.width = Math.max(viewportWidth, cols * (elementWidth + gap) - gap) + 'px';
      gallery.style.height = (rows * (elementHeight + gap) - gap) + 'px';
      
      for (let i = 0; i < 500; i++) {
        const figure = document.createElement('figure');
        figure.className = 'demo-combined__gallery__figure';
        
        // Position elements in grid
        const col = i % cols;
        const row = Math.floor(i / cols);
        
        const x = col * (elementWidth + gap);
        const y = row * (elementHeight + gap);
        
        figure.style.position = 'absolute';
        figure.style.left = x + 'px';
        figure.style.top = y + 'px';
        figure.style.width = elementWidth + 'px';
        figure.style.height = elementHeight + 'px';
        
        // Create img element with transparent pixel (color will be generated in WebGL)
        const img = document.createElement('img');
        img.className = 'demo-combined__gallery__image';
        img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'; // 1x1 transparent pixel
        img.alt = `Element ${i + 1}`;
        
        figure.appendChild(img);
        gallery.appendChild(figure);
      }
    </script>
  </body>
</html>